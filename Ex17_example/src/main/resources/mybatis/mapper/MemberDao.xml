<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.study.springboot.dao.IMemberDao"> 

	<!-- 로그인 -->
	
	<select id="login" resultType="_int"> 
		SELECT COUNT(*) FROM shopping_member WHERE member_id = #{param1} AND member_pw = #{param2} 
	</select>
	
	
	<!-- 회원가입 -->

	<insert id="member_join" parameterType="com.study.springboot.dto.MemberDto"> 
		insert into shopping_member(
		member_idx, member_id, member_pw, member_name, member_email ) 
			values (shopping_member_seq.nextval, #{member_id}, #{member_pw}, #{member_name}, #{member_email})
	</insert>
	
	<!-- 아이디찾기 -->
	
	
	<select id="idFind" resultType="com.study.springboot.dto.MemberDto">
			SELECT * FROM company_member WHERE member_name = #{ param1 } AND member_email = #{ param2 }
	</select>
	
	
	<!-- 비밀번호 찾기 -->
	
	<select id="passwordFind" resultType="com.study.springboot.dto.MemberDto">
			SELECT * FROM company_member WHERE member_name = #{ param1 } AND member_id = #{ param2 } AND member_email = #{ param3 } 
	</select>
	
	<!-- id중복확인 ajax와 연동 -->
	
	<select id="idCheck" resultType="_int">
    		SELECT COUNT(*) FROM company_member WHERE member_id=#{param1}
	</select>
	
	<!-- 회원정보 수정 -->
	
	<update id="member_update">
	update shopping_member set member_id = #{param1}, member_pw = #{param2}, 
		     member_name = #{param3}, member_email = #{param4} WHERE member_idx = #{param5}
	</update>
	
</mapper>